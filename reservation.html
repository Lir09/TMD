<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>예약</title>
<style>
  :root{ --line:#111; --muted:#666; --bg:#fff; --btn:#111; --btn2:#444; }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif; color:#111; background:#fafafa}
  .page{max-width:1200px; margin:24px auto; padding:0 16px}
  .layout{display:grid; gap:16px; grid-template-columns:2fr 1fr; grid-template-rows:auto auto; grid-template-areas:"gallery form" "bottom  form";}
  .card{background:#fff; border:3px solid var(--line); border-radius:10px}
  .gallery{grid-area:gallery; position:relative; overflow:hidden}
  .gallery img{width:100%; display:block; aspect-ratio:4/3; object-fit:cover; background:#eee}
  .nav{position:absolute; top:50%; transform:translateY(-50%); width:52px; height:52px; border-radius:50%; border:3px solid #111; background:#fff; display:grid; place-items:center; cursor:pointer; user-select:none}
  .nav:active{transform:translateY(-50%) scale(.98)}
  .nav.left{left:12px} .nav.right{right:12px}
  .nav span{font-size:24px; line-height:1}
  .bottom{grid-area:bottom; display:grid; gap:16px; grid-template-columns:1fr 1fr}
  .pane{padding:14px 16px}
  .pane h3{margin:2px 0 12px; font-size:18px}
  .date-input{width:100%; height:44px; padding:0 10px; border:2px solid var(--line); border-radius:8px; font-size:16px}
  .slots{display:flex; flex-direction:column; gap:10px}
  .slot{display:flex; align-items:center; gap:10px; font-size:16px}
  .slot input{width:22px; height:22px}
  .form{grid-area:form; display:flex; flex-direction:column; padding:16px}
  .form h3{margin:0 0 12px}
  .field{display:flex; flex-direction:column; gap:6px; margin-bottom:12px}
  .field input, .field select{height:44px; padding:0 12px; border:2px solid var(--line); border-radius:8px; font-size:16px; background:#fff}
  .grow{flex:1}
  .btn{margin-top:auto; height:48px; border-radius:10px; border:none; background:linear-gradient(135deg,var(--btn2),var(--btn)); color:#fff; font-weight:800; font-size:16px; cursor:pointer}
  .btn:active{transform:translateY(1px)}
</style>
</head>
<body>
<div class="page">
  <div class="layout">
    <section class="gallery card" aria-label="공간 사진">
      <img id="galleryImg" src="room1.png" alt="공간 이미지"/>
      <button class="nav left" id="prevBtn" aria-label="이전 사진"><span>←</span></button>
      <button class="nav right" id="nextBtn" aria-label="다음 사진"><span>→</span></button>
    </section>

    <section class="form card" aria-label="개인정보 입력">
      <h3>개인정보 입력</h3>
      <div class="field"><label for="name">이름</label><input id="name" type="text" required placeholder="홍길동"/></div>
      <div class="field"><label for="phone">연락처</label><input id="phone" type="tel" required placeholder="010-1234-5678"/></div>
      <div class="field"><label for="email">이메일</label><input id="email" type="email" placeholder="user@example.com"/></div>
      <div class="grow"></div>
      <button class="btn" id="reserveBtn">예약</button>
    </section>

    <section class="bottom">
      <div class="pane card">
        <h3>날짜 선택</h3>
        <input id="date" class="date-input" type="date" required/>
      </div>
      <div class="pane card">
        <h3>시간대 선택</h3>
        <div class="slots">
          <label class="slot"><input type="checkbox" name="cip" value="cip1"/><span>CIP 1차</span></label>
          <label class="slot"><input type="checkbox" name="cip" value="cip2"/><span>CIP 2차</span></label>
          <label class="slot"><input type="checkbox" name="cip" value="cip3"/><span>CIP 3차</span></label>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
  const galleryImages = ["room1.png","room2.png","room3.png"];
  let gi = 0;
  const imgEl = document.getElementById("galleryImg");

  document.getElementById("prevBtn").addEventListener("click", ()=>{
    gi = (gi - 1 + galleryImages.length) % galleryImages.length;
    imgEl.src = galleryImages[gi];
  });
  document.getElementById("nextBtn").addEventListener("click", ()=>{
    gi = (gi + 1) % galleryImages.length;
    imgEl.src = galleryImages[gi];
  });
  document.addEventListener("keydown", (e)=>{
    if(e.key==="ArrowLeft") document.getElementById("prevBtn").click();
    if(e.key==="ArrowRight") document.getElementById("nextBtn").click();
  });

  const d = document.getElementById("date");
  const today = new Date(); today.setHours(0,0,0,0);
  d.min = today.toISOString().slice(0,10);

  document.getElementById("reserveBtn").addEventListener("click", ()=>{
    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const email = document.getElementById("email").value.trim();
    const date = d.value;
    const slots = Array.from(document.querySelectorAll('input[name="cip"]:checked')).map(x=>x.value);
    if(!name || !phone || !date || slots.length===0){ alert("이름, 연락처, 날짜, 시간대를 확인해 주세요."); return; }
    const q = new URLSearchParams({ name, phone, email, date, slots: slots.join(",") });
    location.href = "reserve.html?" + q.toString();
  });
</script>
</body>
</html>
